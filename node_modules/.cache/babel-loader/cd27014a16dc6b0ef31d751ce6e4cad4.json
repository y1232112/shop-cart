{"ast":null,"code":"import * as types from '../constants/actionTypes';\nimport shop from '../apis/shop';\n\nconst receiveProducts = products => ({\n  type: types.RECEIVE_PRODUCTS,\n  products\n});\n\nexport const getAllProducts = () => dispatch => {\n  shop.getProducts(products => {\n    dispatch(receiveProducts(products));\n  });\n};\n\nconst getAvailPrdct = (e, p) => {\n  if (e.target.value === types.SELECT) {\n    return p[0];\n  } else if (e.target.value === types.LOWEST_TO_HIGHEST) {\n    return p[1];\n  } else if (e.target.value === types.HIGHEST_TO_LOWEST) {\n    return p[2];\n  } else return p[0];\n};\n\nconst getSortProduct = (e, p) => ({\n  type: 'SELECT_TYPE',\n  selectChange: e.target.value,\n  avaiProducts: p\n});\n\nconst resolveSize = (size, selectSize) => {\n  if (selectSize.length == 0) {\n    var initsize = [];\n    initsize.push(size);\n    return initsize;\n  } else {\n    var initsize = [size];\n    var m = 0;\n    var p = initsize.concat(selectSize);\n\n    for (var k = 0; k < p.length; k++) {\n      if (p[k] == size) {\n        m++;\n      }\n    }\n\n    if (m == 2) {\n      var o = [];\n\n      for (var g = 0; g < p.length; g++) {\n        if (p[g] !== size) {\n          o.push(p[g]);\n        }\n      }\n\n      return o;\n    } else {\n      return p;\n    }\n  }\n};\n\nconst getSelectSize = (s, p) => ({\n  type: types.SELECT_SIZE,\n  selectSize: s,\n  avaiProducts: p\n});\n\nconst getSelctSizPrdcts = (arr, products, selectChange) => {\n  var ap = [];\n  var temp = [];\n  var pt = products.map(mp => mp.availableSizes);\n\n  for (var i = 0; i < arr.length; i++) {\n    for (var ti = 0; ti < pt.length; ti++) {\n      for (var ai = 0; ai < pt[ti].length; ai++) {\n        if (pt[ti][ai] == arr[i]) {\n          ap.push(products[ti]);\n        }\n      }\n    }\n  }\n  /* ***************************************************** */\n\n\n  ap = new Set(ap);\n  ap = Array.from(ap);\n  /* **************************************************** */\n\n  /* ----------------------------------------------- */\n\n  /* by id 保存avaiproducts副本*/\n\n  var prdctById = [];\n\n  for (var i = 0; i < ap.length; i++) {\n    prdctById.push(ap[i]);\n  }\n\n  prdctById.sort(function (a, b) {\n    return a.id - b.id;\n  });\n  /* ----------------------------------------------- */\n\n  /* by price 价格从低到高排序*/\n\n  const prdctsByPrice = [];\n\n  for (var i = 0; i < prdctById.length; i++) {\n    prdctsByPrice.push(prdctById[i]);\n  }\n\n  prdctsByPrice.sort(function (a, b) {\n    return a.price - b.price;\n  });\n  console.log('ProductsByPrice', prdctsByPrice);\n  /* ----------------------------------------------- */\n\n  /* by reverse price 价格从高到低排序*/\n\n  var reverseprdctByPrice = [];\n\n  for (var m = prdctsByPrice.length - 1; m >= 0; m--) {\n    reverseprdctByPrice.push(prdctsByPrice[m]);\n  }\n\n  console.log('reverseprdctByPrice', reverseprdctByPrice);\n  var avaiProducts = [prdctById, prdctsByPrice, reverseprdctByPrice];\n  /* ********************************************************************************** */\n\n  if (selectChange == types.HIGHEST_TO_LOWEST) {\n    return avaiProducts[2];\n  } else if (selectChange == types.LOWEST_TO_HIGHEST) {\n    return avaiProducts[1];\n  } else return avaiProducts[0];\n};\n\nexport const addSize = (size, selectSize, products, selectChange) => dispatch => {\n  dispatch(getSelectSize(resolveSize(size, selectSize), getSelctSizPrdcts(resolveSize(size, selectSize), products, selectChange)));\n};\nexport const onChangedSort = (e, avaiProducts) => dispatch => {\n  dispatch(getSortProduct(e, getAvailPrdct(e, avaiProducts)));\n};\n\nconst toCart = (cartProduct, products) => ({\n  type: types.ADD_TO_CART,\n  cartProduct,\n  currentInventory: --cartProduct.inventory,\n  products\n});\n\nexport const addToCart = (cartProduct, products) => dispatch => {\n  dispatch(toCart(cartProduct, products));\n};","map":{"version":3,"sources":["E:/shopping-cart-app/src/actions/index.js"],"names":["types","shop","receiveProducts","products","type","RECEIVE_PRODUCTS","getAllProducts","dispatch","getProducts","getAvailPrdct","e","p","target","value","SELECT","LOWEST_TO_HIGHEST","HIGHEST_TO_LOWEST","getSortProduct","selectChange","avaiProducts","resolveSize","size","selectSize","length","initsize","push","m","concat","k","o","g","getSelectSize","s","SELECT_SIZE","getSelctSizPrdcts","arr","ap","temp","pt","map","mp","availableSizes","i","ti","ai","Set","Array","from","prdctById","sort","a","b","id","prdctsByPrice","price","console","log","reverseprdctByPrice","addSize","onChangedSort","toCart","cartProduct","ADD_TO_CART","currentInventory","inventory","addToCart"],"mappings":"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","sourcesContent":["import * as types from '../constants/actionTypes';\r\nimport shop from '../apis/shop';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst receiveProducts=products=>({\r\n    type:types.RECEIVE_PRODUCTS,\r\n    products\r\n})\r\nexport const getAllProducts=()=>dispatch=>{\r\n    shop.getProducts(\r\n        products=>{\r\n            dispatch(receiveProducts(products))\r\n        }\r\n    )\r\n}\r\n\r\n const getAvailPrdct=(e,p)=>{\r\n    if(e.target.value===types.SELECT){\r\n\r\n   return p[0]\r\n    }\r\n   else if(e.target.value===types.LOWEST_TO_HIGHEST){\r\n     \r\n        return p[1]\r\n    }\r\n    else if(e.target.value===types.HIGHEST_TO_LOWEST){\r\n        return p[2]\r\n    }\r\n    else return p[0]\r\n}\r\n\r\nconst getSortProduct=(e,p)=>({\r\n type:'SELECT_TYPE',\r\n selectChange:e.target.value,\r\navaiProducts:p\r\n\r\n})\r\n\r\nconst resolveSize=(size,selectSize)=>{\r\n   \r\n    if(selectSize.length==0){\r\n        var initsize=[];\r\n        initsize.push(size);\r\n        return initsize;\r\n    }else{\r\n        var initsize=[size];\r\n        var m=0;\r\n       var p=initsize.concat(selectSize)\r\n       for(var k=0;k<p.length;k++){\r\n          if(p[k]==size){\r\n              m++\r\n          }\r\n       }\r\n      if(m==2){\r\n          var o=[];\r\n          for(var g=0;g<p.length;g++){\r\n              if(p[g]!==size){\r\n                  o.push(p[g])\r\n              }\r\n          }\r\n          return o\r\n      }\r\n      else\r\n           {\r\n          \r\n           return p\r\n           }\r\n    }\r\n   \r\n\r\n}\r\n\r\nconst getSelectSize=(s,p)=>({\r\n    type:types.SELECT_SIZE,\r\n    selectSize:s,\r\n    avaiProducts:p\r\n})\r\nconst getSelctSizPrdcts=(arr,products,selectChange)=>{\r\n    var ap=[];\r\n    var temp=[];\r\n\r\n    var pt=products.map(mp=>mp.availableSizes);\r\n    for(var i=0;i<arr.length;i++){\r\n          for(var ti=0;ti<pt.length;ti++){\r\n            for(var ai=0;ai<pt[ti].length;ai++){\r\n                if(pt[ti][ai]==arr[i]){\r\n                    ap.push(products[ti])\r\n                }\r\n            }\r\n          }\r\n              \r\n          \r\n    }\r\n    /* ***************************************************** */\r\n    ap=new Set(ap);\r\n    ap=Array.from(ap) ;\r\n     /* **************************************************** */\r\n     /* ----------------------------------------------- */\r\n/* by id 保存avaiproducts副本*/\r\nvar prdctById=[];\r\nfor(var i=0;i<ap.length;i++){\r\n    prdctById.push(ap[i])\r\n}\r\nprdctById.sort(function(a,b){\r\n    return a.id-b.id;\r\n})\r\n\r\n/* ----------------------------------------------- */\r\n/* by price 价格从低到高排序*/\r\n\r\n  const prdctsByPrice=[];\r\nfor(var i=0;i<prdctById.length;i++){\r\n    prdctsByPrice.push(prdctById[i])\r\n}\r\n\r\n\r\nprdctsByPrice.sort(function(a,b){\r\n    return a.price-b.price;\r\n})\r\nconsole.log('ProductsByPrice',prdctsByPrice);\r\n/* ----------------------------------------------- */\r\n/* by reverse price 价格从高到低排序*/\r\nvar reverseprdctByPrice=[];\r\nfor(var m=prdctsByPrice.length-1;m>=0;m--){\r\n    reverseprdctByPrice.push(prdctsByPrice[m])\r\n}\r\n\r\nconsole.log('reverseprdctByPrice',reverseprdctByPrice)\r\n\r\nvar avaiProducts=[prdctById,prdctsByPrice,reverseprdctByPrice];\r\n     /* ********************************************************************************** */\r\n    if(selectChange==types.HIGHEST_TO_LOWEST){\r\n        return avaiProducts[2]\r\n    }else if(selectChange==types.LOWEST_TO_HIGHEST){\r\n        return avaiProducts[1]\r\n    }\r\n   else return avaiProducts[0];\r\n}\r\nexport const addSize=(size,selectSize,products,selectChange)=>dispatch=>{\r\n  dispatch(\r\n      getSelectSize(\r\n                       resolveSize(size,selectSize),\r\n                       getSelctSizPrdcts(resolveSize(size,selectSize),products,selectChange)\r\n                    )\r\n      )\r\n}\r\nexport const onChangedSort=(e,avaiProducts)=>dispatch=>{\r\n   dispatch(getSortProduct(e,getAvailPrdct(e,avaiProducts)))\r\n}\r\n\r\nconst toCart=(cartProduct,products)=>({\r\n    type:types.ADD_TO_CART,\r\n    cartProduct,\r\n    currentInventory:--cartProduct.inventory,\r\n    products,\r\n  \r\n    \r\n    \r\n})\r\n\r\nexport const addToCart=(cartProduct,products)=>dispatch=>{\r\n   dispatch(toCart(cartProduct,products))\r\n}"]},"metadata":{},"sourceType":"module"}